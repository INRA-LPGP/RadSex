\hypertarget{table__parser_8h}{}\doxysection{/home/romain/work/code/\+Rad\+Sex/src/table\+\_\+parser.h File Reference}
\label{table__parser_8h}\index{/home/romain/work/code/RadSex/src/table\_parser.h@{/home/romain/work/code/RadSex/src/table\_parser.h}}
{\ttfamily \#include $<$mutex$>$}\newline
{\ttfamily \#include $<$queue$>$}\newline
{\ttfamily \#include \char`\"{}parameters.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}popmap.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structMarker}{Marker}}
\item 
struct \mbox{\hyperlink{structMarkersQueue}{Markers\+Queue}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{table__parser_8h_a182a7d88af41ffade4ed9f42db097f22}\label{table__parser_8h_a182a7d88af41ffade4ed9f42db097f22}} 
typedef std\+::vector$<$ std\+::string $>$ {\bfseries Header}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{table__parser_8h_a112b4364370179e0a537d2a81eabc471}{table\+\_\+parser}} (\mbox{\hyperlink{structParameters}{Parameters}} \&parameters, const \mbox{\hyperlink{structPopmap}{Popmap}} \&popmap, \mbox{\hyperlink{structMarkersQueue}{Markers\+Queue}} \&markers\+\_\+queue, std\+::mutex \&queue\+\_\+mutex, bool \&parsing\+\_\+ended, bool no\+\_\+seq=true, bool no\+\_\+group=false)
\begin{DoxyCompactList}\small\item\em Read markers from a markers depth table and store them in a queue. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{structMarker}{Marker}} $>$ \mbox{\hyperlink{table__parser_8h_a36a66b736283a186522db3b718319e1d}{get\+\_\+batch}} (\mbox{\hyperlink{structMarkersQueue}{Markers\+Queue}} \&markers\+\_\+queue, std\+::mutex \&queue\+\_\+mutex, ulong batch\+\_\+size=1000)
\begin{DoxyCompactList}\small\item\em Get a batch of markers from the queue. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{table__parser_8h_af7091bf3f43806bf2ea0fb170835b4e6}\label{table__parser_8h_af7091bf3f43806bf2ea0fb170835b4e6}} 
std\+::vector$<$ std\+::string $>$ {\bfseries get\+\_\+column\+\_\+group} (const std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ \&groups, const std\+::vector$<$ std\+::string $>$ \&header)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{table__parser_8h_a36a66b736283a186522db3b718319e1d}\label{table__parser_8h_a36a66b736283a186522db3b718319e1d}} 
\index{table\_parser.h@{table\_parser.h}!get\_batch@{get\_batch}}
\index{get\_batch@{get\_batch}!table\_parser.h@{table\_parser.h}}
\doxysubsubsection{\texorpdfstring{get\_batch()}{get\_batch()}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structMarker}{Marker}}$>$ get\+\_\+batch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structMarkersQueue}{Markers\+Queue}} \&}]{markers\+\_\+queue,  }\item[{std\+::mutex \&}]{queue\+\_\+mutex,  }\item[{ulong}]{batch\+\_\+size = {\ttfamily 1000} }\end{DoxyParamCaption})}



Get a batch of markers from the queue. 


\begin{DoxyParams}{Parameters}
{\em markers\+\_\+queue} & \\
\hline
{\em queue\+\_\+mutex} & \\
\hline
{\em batch\+\_\+size} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\mbox{\Hypertarget{table__parser_8h_a112b4364370179e0a537d2a81eabc471}\label{table__parser_8h_a112b4364370179e0a537d2a81eabc471}} 
\index{table\_parser.h@{table\_parser.h}!table\_parser@{table\_parser}}
\index{table\_parser@{table\_parser}!table\_parser.h@{table\_parser.h}}
\doxysubsubsection{\texorpdfstring{table\_parser()}{table\_parser()}}
{\footnotesize\ttfamily void table\+\_\+parser (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structParameters}{Parameters}} \&}]{parameters,  }\item[{const \mbox{\hyperlink{structPopmap}{Popmap}} \&}]{popmap,  }\item[{\mbox{\hyperlink{structMarkersQueue}{Markers\+Queue}} \&}]{markers\+\_\+queue,  }\item[{std\+::mutex \&}]{queue\+\_\+mutex,  }\item[{bool \&}]{parsing\+\_\+ended,  }\item[{bool}]{no\+\_\+seq = {\ttfamily true},  }\item[{bool}]{no\+\_\+group = {\ttfamily false} }\end{DoxyParamCaption})}



Read markers from a markers depth table and store them in a queue. 

Read a markers depth table generated with process(). Each marker is stored in a \mbox{\hyperlink{structMarker}{Marker}} instance which is pushed to a queue. The function waits if the queue gets bigger than \mbox{\hyperlink{utils_8h_a623ec78b7909090dbedac4af1d52abb4}{M\+A\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}}. Batches of markers are obtained from the queue with \mbox{\hyperlink{table__parser_8h_a36a66b736283a186522db3b718319e1d}{get\+\_\+batch()}}.


\begin{DoxyParams}{Parameters}
{\em parameters} & A Parameter object which contains values of all parameters \\
\hline
{\em popmap} & A \mbox{\hyperlink{structPopmap}{Popmap}} object with information on the group of each individual \\
\hline
{\em markers\+\_\+queue} & Queue of \mbox{\hyperlink{structMarker}{Marker}} objects \\
\hline
{\em queue\+\_\+mutex} & Mutex to lock / unlock the markers queue \\
\hline
{\em parsing\+\_\+ended} & A flag indicating that the parsing ended, set to true before exiting the function \\
\hline
{\em no\+\_\+seq} & If true, marker sequences and ids won\textquotesingle{}t be stored in \mbox{\hyperlink{structMarker}{Marker}} objects \\
\hline
{\em no\+\_\+group} & If true, group counts won\textquotesingle{}t be computed \\
\hline
\end{DoxyParams}
