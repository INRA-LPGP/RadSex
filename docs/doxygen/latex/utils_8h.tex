\hypertarget{utils_8h}{}\doxysection{/home/romain/work/code/\+Rad\+Sex/src/utils.h File Reference}
\label{utils_8h}\index{/home/romain/work/code/RadSex/src/utils.h@{/home/romain/work/code/RadSex/src/utils.h}}


Implements general utility functions used.  


{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$chrono$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$unordered\+\_\+map$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{utils_8h_af54a2d4a37ffb240c80d6bd1202a1104}\label{utils_8h_af54a2d4a37ffb240c80d6bd1202a1104}} 
\#define \mbox{\hyperlink{utils_8h_af54a2d4a37ffb240c80d6bd1202a1104}{T\+I\+M\+E\+\_\+\+F\+O\+R\+M\+AT}}~\char`\"{}\%Y-\/\%m-\/\%d \%H\+:\%M\+:\%S\char`\"{}
\begin{DoxyCompactList}\small\item\em Date and time format for logging. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{utils_8h_ae6e20e9953b4506ab8c5b45ef69272f9}\label{utils_8h_ae6e20e9953b4506ab8c5b45ef69272f9}} 
\#define \mbox{\hyperlink{utils_8h_ae6e20e9953b4506ab8c5b45ef69272f9}{M\+A\+X\+\_\+\+T\+I\+M\+E\+\_\+\+S\+I\+ZE}}~21
\begin{DoxyCompactList}\small\item\em Max number of characters in \mbox{\hyperlink{utils_8h_af54a2d4a37ffb240c80d6bd1202a1104}{T\+I\+M\+E\+\_\+\+F\+O\+R\+M\+AT}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{utils_8h_aced66975c154ea0e2a8ec3bc818b4e08}\label{utils_8h_aced66975c154ea0e2a8ec3bc818b4e08}} 
\#define \mbox{\hyperlink{utils_8h_aced66975c154ea0e2a8ec3bc818b4e08}{L\+O\+G\+\_\+\+E\+R\+R\+OR}}~\char`\"{}E\+R\+R\+OR\char`\"{}
\begin{DoxyCompactList}\small\item\em Message prefix for log level E\+R\+R\+OR. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{utils_8h_adf4476a6a4ea6c74231c826e899d7189}\label{utils_8h_adf4476a6a4ea6c74231c826e899d7189}} 
\#define \mbox{\hyperlink{utils_8h_adf4476a6a4ea6c74231c826e899d7189}{L\+O\+G\+\_\+\+W\+A\+R\+N\+I\+NG}}~\char`\"{}W\+A\+R\+N\+I\+NG\char`\"{}
\begin{DoxyCompactList}\small\item\em Message prefix for log level W\+A\+R\+N\+I\+NG. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{utils_8h_aeb4f36db01bd128c7afeac5889dac311}\label{utils_8h_aeb4f36db01bd128c7afeac5889dac311}} 
\#define \mbox{\hyperlink{utils_8h_aeb4f36db01bd128c7afeac5889dac311}{L\+O\+G\+\_\+\+I\+N\+FO}}~\char`\"{}I\+N\+FO\char`\"{}
\begin{DoxyCompactList}\small\item\em Message prefix for log level I\+N\+FO. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \mbox{\hyperlink{utils_8h_a2ccc3f59a22203b8b25cbd9489c5addc}{print\+\_\+time}} (char $\ast$buff)
\begin{DoxyCompactList}\small\item\em Print current time. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{utils_8h_a5786759f3550e82d7b8fe3e15dbf4af0}{split}} (std\+::string str, const std\+::string \&separator=\char`\"{}\textbackslash{}t\char`\"{})
\begin{DoxyCompactList}\small\item\em Split a string into a vector of string. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{utils_8h_a2e2a91eaba09fbc28a4a968a54e38c1a}{fast\+\_\+stoi}} (const char $\ast$str)
\begin{DoxyCompactList}\small\item\em Fast stoi conversion. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{utils_8h_a2b7baa175b124e20ee48d25a26ad0fa6}{log}} (T line, const std\+::string level=\mbox{\hyperlink{utils_8h_aeb4f36db01bd128c7afeac5889dac311}{L\+O\+G\+\_\+\+I\+N\+FO}}, bool flushline=true)
\begin{DoxyCompactList}\small\item\em Print logging message. \end{DoxyCompactList}\item 
std\+::ifstream \mbox{\hyperlink{utils_8h_ac1f4f71032f827757d6eb5b76ee10cf9}{open\+\_\+input}} (const std\+::string \&input\+\_\+file\+\_\+path)
\begin{DoxyCompactList}\small\item\em Open an input file and check that the file is open properly. \end{DoxyCompactList}\item 
std\+::ofstream \mbox{\hyperlink{utils_8h_ab33b713fe0754a5f7729a22cedc0fa9b}{open\+\_\+output}} (const std\+::string \&output\+\_\+file\+\_\+path)
\begin{DoxyCompactList}\small\item\em Open an output file and check that the file is open properly. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{utils_8h_a34cbea4d074a6260aa2a3ca6cf3daa3e}{log\+\_\+progress}} (uint64\+\_\+t \&n\+\_\+processed\+\_\+markers, const uint32\+\_\+t marker\+\_\+processed\+\_\+tick)
\begin{DoxyCompactList}\small\item\em Print a progress log message. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{utils_8h_a05a02048748b513d61cb0e048587c8fe}{get\+\_\+runtime}} (const std\+::chrono\+::steady\+\_\+clock\+::time\+\_\+point t\+\_\+begin)
\begin{DoxyCompactList}\small\item\em Compute runtime until present time. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{utils_8h_aed58fb3d0b7c4ca2a4ba23228a205bad}{log\+\_\+progress\+\_\+bar}} (uint64\+\_\+t \&n\+\_\+processed\+\_\+markers, const uint32\+\_\+t marker\+\_\+processed\+\_\+tick, char symbol=\textquotesingle{}\#\textquotesingle{}, uint16\+\_\+t ticks=50)
\begin{DoxyCompactList}\small\item\em Update a progress bar log message. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\std\+::string \mbox{\hyperlink{utils_8h_ac5169aeb75bd397c83c20b965cfdbfc6}{print\+\_\+list}} (const T \&list, const std\+::string \&sep=\char`\"{}, \char`\"{})
\begin{DoxyCompactList}\small\item\em Print a container as a \char`\"{}sep\char`\"{}-\/separated string. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements general utility functions used. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{utils_8h_a2e2a91eaba09fbc28a4a968a54e38c1a}\label{utils_8h_a2e2a91eaba09fbc28a4a968a54e38c1a}} 
\index{utils.h@{utils.h}!fast\_stoi@{fast\_stoi}}
\index{fast\_stoi@{fast\_stoi}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{fast\_stoi()}{fast\_stoi()}}
{\footnotesize\ttfamily int fast\+\_\+stoi (\begin{DoxyParamCaption}\item[{const char $\ast$}]{str }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Fast stoi conversion. 

I honestly don\textquotesingle{}t know how it works but it\textquotesingle{}s fast.


\begin{DoxyParams}{Parameters}
{\em str} & Pointer to a char array to convert to int\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The converted string as an int 
\end{DoxyReturn}


Definition at line 103 of file utils.\+h.



Referenced by Markers\+Table\+::start\+\_\+parser().

\mbox{\Hypertarget{utils_8h_a05a02048748b513d61cb0e048587c8fe}\label{utils_8h_a05a02048748b513d61cb0e048587c8fe}} 
\index{utils.h@{utils.h}!get\_runtime@{get\_runtime}}
\index{get\_runtime@{get\_runtime}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{get\_runtime()}{get\_runtime()}}
{\footnotesize\ttfamily std\+::string get\+\_\+runtime (\begin{DoxyParamCaption}\item[{const std\+::chrono\+::steady\+\_\+clock\+::time\+\_\+point}]{t\+\_\+begin }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Compute runtime until present time. 


\begin{DoxyParams}{Parameters}
{\em t\+\_\+begin} & Time point at the start of a measurement\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Runtime until now as a string with format \char`\"{}$<$\+H$>$h $<$\+M$>$m $<$\+S$>$s\char`\"{} 
\end{DoxyReturn}


Definition at line 222 of file utils.\+h.



Referenced by Analysis\+::print\+\_\+ending\+\_\+log(), and process().

\mbox{\Hypertarget{utils_8h_a2b7baa175b124e20ee48d25a26ad0fa6}\label{utils_8h_a2b7baa175b124e20ee48d25a26ad0fa6}} 
\index{utils.h@{utils.h}!log@{log}}
\index{log@{log}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{log()}{log()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void log (\begin{DoxyParamCaption}\item[{T}]{line,  }\item[{const std\+::string}]{level = {\ttfamily \mbox{\hyperlink{utils_8h_aeb4f36db01bd128c7afeac5889dac311}{L\+O\+G\+\_\+\+I\+N\+FO}}},  }\item[{bool}]{flushline = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Print logging message. 


\begin{DoxyParams}{Parameters}
{\em line} & Message to print \\
\hline
{\em level} & Log level, either \mbox{\hyperlink{utils_8h_aeb4f36db01bd128c7afeac5889dac311}{L\+O\+G\+\_\+\+I\+N\+FO}}, \mbox{\hyperlink{utils_8h_adf4476a6a4ea6c74231c826e899d7189}{L\+O\+G\+\_\+\+W\+A\+R\+N\+I\+NG}}, or \mbox{\hyperlink{utils_8h_aced66975c154ea0e2a8ec3bc818b4e08}{L\+O\+G\+\_\+\+E\+R\+R\+OR}} \\
\hline
{\em flushline} & If true, std\+::endl is added at the end of the log line \\
\hline
\end{DoxyParams}


Definition at line 127 of file utils.\+h.



Referenced by Popmap\+::get\+\_\+count(), Popmap\+::get\+\_\+group(), get\+\_\+input\+\_\+files(), Header\+::\+Header(), Map\+::load\+\_\+bwa\+\_\+index(), log\+\_\+progress(), log\+\_\+progress\+\_\+bar(), open\+\_\+input(), open\+\_\+output(), Popmap\+::\+Popmap(), Analysis\+::print\+\_\+ending\+\_\+log(), Analysis\+::print\+\_\+groups(), Analysis\+::print\+\_\+starting\+\_\+log(), process(), process\+\_\+file(), and Markers\+Table\+::start\+\_\+parser().

\mbox{\Hypertarget{utils_8h_a34cbea4d074a6260aa2a3ca6cf3daa3e}\label{utils_8h_a34cbea4d074a6260aa2a3ca6cf3daa3e}} 
\index{utils.h@{utils.h}!log\_progress@{log\_progress}}
\index{log\_progress@{log\_progress}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{log\_progress()}{log\_progress()}}
{\footnotesize\ttfamily void log\+\_\+progress (\begin{DoxyParamCaption}\item[{uint64\+\_\+t \&}]{n\+\_\+processed\+\_\+markers,  }\item[{const uint32\+\_\+t}]{marker\+\_\+processed\+\_\+tick }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Print a progress log message. 


\begin{DoxyParams}{Parameters}
{\em n\+\_\+processed\+\_\+markers} & Number of markers processed \\
\hline
{\em marker\+\_\+processed\+\_\+tick} & Number of markers corresponding to 1\% of total markers \\
\hline
\end{DoxyParams}


Definition at line 201 of file utils.\+h.

\mbox{\Hypertarget{utils_8h_aed58fb3d0b7c4ca2a4ba23228a205bad}\label{utils_8h_aed58fb3d0b7c4ca2a4ba23228a205bad}} 
\index{utils.h@{utils.h}!log\_progress\_bar@{log\_progress\_bar}}
\index{log\_progress\_bar@{log\_progress\_bar}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{log\_progress\_bar()}{log\_progress\_bar()}}
{\footnotesize\ttfamily void log\+\_\+progress\+\_\+bar (\begin{DoxyParamCaption}\item[{uint64\+\_\+t \&}]{n\+\_\+processed\+\_\+markers,  }\item[{const uint32\+\_\+t}]{marker\+\_\+processed\+\_\+tick,  }\item[{char}]{symbol = {\ttfamily \textquotesingle{}\#\textquotesingle{}},  }\item[{uint16\+\_\+t}]{ticks = {\ttfamily 50} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Update a progress bar log message. 


\begin{DoxyParams}{Parameters}
{\em n\+\_\+processed\+\_\+markers} & Number of markers processed \\
\hline
{\em marker\+\_\+processed\+\_\+tick} & Number of markers corresponding to 1\% of total markers \\
\hline
{\em symbol} & Symbol to use to draw the progress bar (e.\+g. \# -\/$>$ \mbox{[}\#\#\#...\mbox{]}) \\
\hline
{\em ticks} & Total number of ticks in progress bar (should be a factor of 100) \\
\hline
\end{DoxyParams}


Definition at line 246 of file utils.\+h.



Referenced by process(), and Analysis\+::processor().

\mbox{\Hypertarget{utils_8h_ac1f4f71032f827757d6eb5b76ee10cf9}\label{utils_8h_ac1f4f71032f827757d6eb5b76ee10cf9}} 
\index{utils.h@{utils.h}!open\_input@{open\_input}}
\index{open\_input@{open\_input}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{open\_input()}{open\_input()}}
{\footnotesize\ttfamily std\+::ifstream open\+\_\+input (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{input\+\_\+file\+\_\+path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Open an input file and check that the file is open properly. 


\begin{DoxyParams}{Parameters}
{\em input\+\_\+file\+\_\+path} & Path to the file to open\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An input file stream for the input file 
\end{DoxyReturn}


Definition at line 148 of file utils.\+h.



Referenced by Map\+::load\+\_\+contig\+\_\+lengths(), Popmap\+::\+Popmap(), and Markers\+Table\+::start\+\_\+parser().

\mbox{\Hypertarget{utils_8h_ab33b713fe0754a5f7729a22cedc0fa9b}\label{utils_8h_ab33b713fe0754a5f7729a22cedc0fa9b}} 
\index{utils.h@{utils.h}!open\_output@{open\_output}}
\index{open\_output@{open\_output}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{open\_output()}{open\_output()}}
{\footnotesize\ttfamily std\+::ofstream open\+\_\+output (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{output\+\_\+file\+\_\+path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Open an output file and check that the file is open properly. 


\begin{DoxyParams}{Parameters}
{\em output\+\_\+file\+\_\+path} & Path to the file to open\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An output file stream for the output file 
\end{DoxyReturn}


Definition at line 175 of file utils.\+h.



Referenced by Subset\+::extra\+\_\+setup(), Map\+::extra\+\_\+setup(), Freq\+::generate\+\_\+output(), Distrib\+::generate\+\_\+output(), Signif\+::generate\+\_\+output(), Depth\+::generate\+\_\+output(), and process().

\mbox{\Hypertarget{utils_8h_ac5169aeb75bd397c83c20b965cfdbfc6}\label{utils_8h_ac5169aeb75bd397c83c20b965cfdbfc6}} 
\index{utils.h@{utils.h}!print\_list@{print\_list}}
\index{print\_list@{print\_list}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{print\_list()}{print\_list()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
std\+::string print\+\_\+list (\begin{DoxyParamCaption}\item[{const T \&}]{list,  }\item[{const std\+::string \&}]{sep = {\ttfamily \char`\"{},~\char`\"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Print a container as a \char`\"{}sep\char`\"{}-\/separated string. 


\begin{DoxyParams}{Parameters}
{\em list} & Container to print \\
\hline
{\em sep} & Separator between container elements\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A string of all items in the container separated by sep. 
\end{DoxyReturn}


Definition at line 281 of file utils.\+h.



Referenced by Subset\+::extra\+\_\+setup(), and Signif\+::generate\+\_\+output().

\mbox{\Hypertarget{utils_8h_a2ccc3f59a22203b8b25cbd9489c5addc}\label{utils_8h_a2ccc3f59a22203b8b25cbd9489c5addc}} 
\index{utils.h@{utils.h}!print\_time@{print\_time}}
\index{print\_time@{print\_time}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{print\_time()}{print\_time()}}
{\footnotesize\ttfamily char$\ast$ print\+\_\+time (\begin{DoxyParamCaption}\item[{char $\ast$}]{buff }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Print current time. 


\begin{DoxyParams}{Parameters}
{\em buff} & Char array to store current time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Formatted current time as a char array 
\end{DoxyReturn}


Definition at line 52 of file utils.\+h.



Referenced by log().

\mbox{\Hypertarget{utils_8h_a5786759f3550e82d7b8fe3e15dbf4af0}\label{utils_8h_a5786759f3550e82d7b8fe3e15dbf4af0}} 
\index{utils.h@{utils.h}!split@{split}}
\index{split@{split}!utils.h@{utils.h}}
\doxysubsubsection{\texorpdfstring{split()}{split()}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ split (\begin{DoxyParamCaption}\item[{std\+::string}]{str,  }\item[{const std\+::string \&}]{separator = {\ttfamily \char`\"{}\textbackslash{}t\char`\"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Split a string into a vector of string. 


\begin{DoxyParams}{Parameters}
{\em str} & The string to split \\
\hline
{\em separator} & Separator to split the string by\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The splitted string as vector of strings 
\end{DoxyReturn}


Definition at line 73 of file utils.\+h.



Referenced by get\+\_\+input\+\_\+files(), Header\+::\+Header(), Map\+::load\+\_\+contig\+\_\+lengths(), Custom\+Formatter\+::make\+\_\+option(), and Popmap\+::\+Popmap().

